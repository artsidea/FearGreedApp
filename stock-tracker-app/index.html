<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Tracker Pro</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ“ˆ Stock Tracker Pro</h1>
            <p>Track your investments with real-time data</p>
        </header>

        <main>
            <!-- Stock Input Section -->
            <section class="input-section">
                <div class="input-group">
                    <label for="stockSymbol">Stock Symbol</label>
                    <input type="text" id="stockSymbol" placeholder="e.g., AAPL, MSFT, GOOGL" maxlength="10">
                    <button id="searchBtn" onclick="searchStock()">Search</button>
                </div>
                <div id="loading" class="loading hidden">
                    <div class="spinner"></div>
                    <span>Fetching stock data...</span>
                </div>
            </section>

            <!-- Stock Summary Section -->
            <section id="stockSummary" class="stock-summary hidden">
                <div class="summary-header">
                    <div class="stock-info">
                        <h2 id="stockName"></h2>
                        <span id="stockSymbolDisplay"></span>
                    </div>
                    <div class="price-info">
                        <span id="currentPrice"></span>
                        <span id="priceChange"></span>
                        <span id="priceChangePercent"></span>
                    </div>
                </div>
                
                <div class="summary-grid">
                    <div class="summary-card">
                        <h3>Market Cap</h3>
                        <span id="marketCap">-</span>
                    </div>
                    <div class="summary-card">
                        <h3>P/E Ratio</h3>
                        <span id="peRatio">-</span>
                    </div>
                    <div class="summary-card">
                        <h3>52W High</h3>
                        <span id="high52w">-</span>
                    </div>
                    <div class="summary-card">
                        <h3>52W Low</h3>
                        <span id="low52w">-</span>
                    </div>
                    <div class="summary-card">
                        <h3>Volume</h3>
                        <span id="volume">-</span>
                    </div>
                    <div class="summary-card">
                        <h3>Avg Volume</h3>
                        <span id="avgVolume">-</span>
                    </div>
                </div>
            </section>

            <!-- Portfolio Section -->
            <section id="portfolioSection" class="portfolio-section hidden">
                <h3>ðŸ“Š Portfolio Tracking</h3>
                <div class="portfolio-form">
                    <div class="form-group">
                        <label for="sharesOwned">Shares Owned</label>
                        <input type="number" id="sharesOwned" placeholder="0" min="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="avgPurchasePrice">Average Purchase Price ($)</label>
                        <input type="number" id="avgPurchasePrice" placeholder="0.00" min="0" step="0.01">
                    </div>
                    <button onclick="calculatePortfolio()">Calculate Returns</button>
                </div>
                
                <div id="portfolioResults" class="portfolio-results hidden">
                    <div class="result-card">
                        <h4>Total Investment</h4>
                        <span id="totalInvestment">$0.00</span>
                    </div>
                    <div class="result-card">
                        <h4>Current Value</h4>
                        <span id="currentValue">$0.00</span>
                    </div>
                    <div class="result-card">
                        <h4>Total Gain/Loss</h4>
                        <span id="totalGainLoss">$0.00</span>
                    </div>
                    <div class="result-card">
                        <h4>Growth %</h4>
                        <span id="growthPercent">0.00%</span>
                    </div>
                </div>
            </section>

            <!-- Chart Section -->
            <section id="chartSection" class="chart-section hidden">
                <div class="chart-header">
                    <h3>ðŸ“Š Price Chart</h3>
                    <div class="chart-controls">
                        <button class="chart-btn active" onclick="changeTimeframe('1M')">1M</button>
                        <button class="chart-btn" onclick="changeTimeframe('3M')">3M</button>
                        <button class="chart-btn" onclick="changeTimeframe('6M')">6M</button>
                        <button class="chart-btn" onclick="changeTimeframe('1Y')">1Y</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="priceChart"></canvas>
                </div>
            </section>

            <!-- Data Table Section -->
            <section id="tableSection" class="table-section hidden">
                <div class="table-header">
                    <h3>ðŸ“‹ Historical Data</h3>
                    <button id="downloadBtn" onclick="downloadCSV()">ðŸ“¥ Download CSV</button>
                </div>
                <div class="table-container">
                    <table id="dataTable">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Open</th>
                                <th>High</th>
                                <th>Low</th>
                                <th>Close</th>
                                <th>Volume</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                        </tbody>
                    </table>
                </div>
            </section>
        </main>

        <!-- Error Modal -->
        <div id="errorModal" class="modal hidden">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">&times;</span>
                <h3>Error</h3>
                <p id="errorMessage"></p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>